---
layout: post
title: "Getting to Know Your Data"
date:   2015-10-22 20:49:52
authors: "Courtney Soderberg"
dateCreated:  2014-11-26 20:49:52
lastModified: 2015-07-23 14:28:52
category: time-series-workshop
tags: [module-1]
mainTag: GIS-Spatial-Data
description: "This post explains the fundamental principles, functions and metadata that you need to work with raster data in R."
code1: 
image:
  feature: lidar_GrandMesa.png
  credit: LiDAR data collected over Grand Mesa, Colorado - National Ecological Observatory Network (NEON)
  creditlink: http://www.neoninc.org
permalink: /R/Raster-Data-In-R/
code1: /R/2015-07-22-Introduction-to-Raster-Data-In-R.R
comments: true

---

<section id="table-of-contents" class="toc">
  <header>
    <h3>Contents</h3>
  </header>
<div id="drawer" markdown="1">
*  Auto generated table of contents
{:toc}
</div>
</section><!-- /#table-of-contents -->

##About
This activity will walk you through the fundamentals of data manipulation and basic plotting.

**R Skill Level:** Intermediate - you've got the basics of `R` down.

<div id="objectives">

<h3>Goals / Objectives</h3>
After completing this activity, you will know:
<ol>
<li>How to calculate basic descriptive statistics for groups of data.</li>
<li>How to create basic time series plots in `R`.</li>
</ol>

<h3>Things You'll Need To Complete This Lesson</h3>

<h3>R Libraries to Install:</h3>
<ul>
<li><strong>raster:</strong> <code> install.packages("dplyr")</code></li>
<li><strong>rgdal:</strong> <code> install.packages("lubridate")</code></li>
<li><strong>rgdal:</strong> <code> install.packages("ggplot2")</code></li>

</ul>
<h4>Tools To Install</h4>

Please be sure you have the most current version of `R` and preferably
R studio to write your code.


<h4>Data to Download</h4>

Download the raster and *in situ* collected vegetation structure data:
<ul>
<li><a href="http://neonhighered.org/Data/LidarActivity/CHM_InSitu_Data.zip" class="btn btn-success"> DOWNLOAD Sample NEON LiDAR data in Raster Format & Vegetation Sampling Data</a></li>
<li><a href="{{ site.baseurl }}/data/rasterLayers_tif.zip" class="btn btn-success"> DOWNLOAD NEON imagery data (tiff format) California Domain 17 (D17)</a></li>
</ul>

<p>The LiDAR and imagery data used to create the rasters in this dataset were 
collected over the San Joaquin field site located in California (NEON Domain 17) 
and processed at <a href="http://www.neoninc.org" target="_blank" >NEON </a> 
headquarters. The entire dataset can be accessed by request from the NEON website.</p>  

#About Raster Data
Now that we have our data loaded into R and into the correct formats, we want to start looking at some basic descriptives and plots. This will help us start to familiarize ourselves with our data, as well as do some basic sanity checks on our data to make sure we haven't missed anything when importing our data.

One thing we may want to do is to calculate some basic descriptives, for example means and sdevs. Calculating these values for each year probably won't give us a lot of useful information, so instead we're going to break out data up by months so we can look at the mean temperature for each month for each year. 

The first thing we need to do is create year and month variables so that we can aggregate our data in the way we want. To do this we're going to use a package called `lubridate`. We need to tell it the order of our date information in our datetime variable, and then the type of data information, e.g. year,that we want to pull out and put into a new variable. We'll do this for year and month

```{r chunk-1}
yr.09.11$year <- year(as.Date(yr.09.11$datetime, "%y-%b-%d"))
yr.09.11$month <- month(as.Date(yr.09.11$datetime, "%y-%b-%d"))
```

Now that we have our year and month variables, we want to calculate the mean air temperatue for each month for each year. We talked a bit about the dplyr package before, and we'll use it here again. In particular, we're going to use a "split-apply-combine" technique. We'll split the datafile into groups, apply the same function to each group, and then combine the results back together. 

```{r chunk-1}
yr.09.11 %>%
  group_by(year, month) %>%
  summarize(mean_airt = mean(airt, na.rm = TRUE)) %>%
  filter(!is.nan(mean_airt))

```